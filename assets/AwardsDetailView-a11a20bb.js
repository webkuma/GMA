import{u as C,r as t,o as j,e as K,a,c as o,b as e,w as V,v as N,F as b,d as $,t as w,m as L,n as O,p as I,j as y,f as F,g as m,h as T,i as A,R as B,l as P}from"./index-2411819c.js";import{e as p}from"./emitter-7f99bbc0.js";import{i as k}from"./index-5afbb71c.js";const Z={class:"flex lg:hidden mb-4"},G=["value"],U={class:"w-1/2 bg-gray-600 bg-opacity-20 rounded hidden lg:block"},W=e("h2",{class:"pt-4 text-2xl font-bold text-center text-yellow-200"}," 看其他獎項 ",-1),q={class:"place-items-center place-content-center grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3"},E=["onClick"],X=e("span",{class:"absolute inset-0 bg-black rounded-md opacity-50","aria-hidden":"true"},null,-1),z={class:"absolute font-bold"},H=["src"],J={__name:"Awards",setup(S){const i=C(),f=t(),c=t(),h=t(),u=t("");j(async()=>{await i.isReady(),f.value=i.currentRoute.value.params.year,c.value=i.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),p.on("yearChange",r=>{u.value=r,l(r)});async function l(r){const _=await K(r);_?h.value=_:p.emit("isNotFoundYear",!0)}function v(r){p.emit("updateSelectedYear",{year:u.value,awards:r}),i.push({path:`/Awards/${u.value}/${r}`})}return(r,_)=>(a(),o(b,null,[e("section",Z,[V(e("select",{onChange:_[0]||(_[0]=n=>v(n.target.value)),"onUpdate:modelValue":_[1]||(_[1]=n=>c.value=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(a(!0),o(b,null,$(h.value,n=>(a(),o("option",{value:n.awards,key:n.id},w(n.awards),9,G))),128))],544),[[N,c.value]])]),e("section",U,[W,e("div",q,[(a(!0),o(b,null,$(h.value,n=>(a(),o("div",{class:"relative w-32 h-32 flex items-center justify-center bg-custom-gold rounded-md cursor-pointer m-4",key:n.id,onClick:x=>v(n.awards)},[X,e("span",z,w(n.awards),1),e("img",{src:n.url,class:"p-1 rounded-xl w-32 h-32 aspect-square",alt:"awards img"},null,8,H)],8,E))),128))])])],64))}},Q={class:"w-full lg:w-1/2 flex flex-col bg-gray-600 bg-opacity-20 rounded"},ee={class:"flex flex-col"},te={class:"text-center mt-1"},se={key:0,class:"text-[#f4e0b2] font-black bg-gradient-to-r from-yellow-500 via-yellow-600 to-yellow-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-yellow-500 text-base p-3 text-center rounded-lg",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#demo"},ae={class:"text-center"},oe={class:"col-start-2 py-4 text-2xl font-bold text-yellow-200"},re={key:0,class:"flex justify-center"},le={key:0},ne=["src"],ce={class:"flex"},de=["src"],ie={key:0,class:"flex flex-col justify-center text-yellow-200"},ue={class:"text-lg mb-1"},he={key:1,class:"flex flex-col justify-center"},ve={class:"text-lg mb-1"},_e={key:0,class:"flex items-center justify-center"},we=["onClick"],pe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),fe=[pe],xe=["onClick"],ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),me=[ge],ye=e("div",null,[e("p",{class:"p-2 text-gray-400"}," # 試聽找錯可能是金曲獎名稱與對方建立的 KKBOX 帳號不匹配或搜尋結果重複 ... ")],-1),be={class:"offcanvas offcanvas-start text-bg-dark",id:"demo",style:{width:"350px"}},ke=e("div",{class:"offcanvas-header"},[e("h1",{class:"offcanvas-title"},"專輯試聽"),e("button",{type:"button",class:"btn-close btn-close-white border","data-bs-dismiss":"offcanvas"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor",className:"w-6 h-6"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})])])],-1),$e={class:"offcanvas-body flex items-center justify-center"},Ce={key:0},je=["src"],Se={__name:"AwardsDetail",setup(S){const i=L(),f=O();t();const c=t(1);t(0);const h=C(),u=t(),l=t();t(),t(),t(),t("");const v=t(),r=t(),_=t(),n=t(),x=t();j(async()=>{c.value=1,await h.isReady(),u.value=h.currentRoute.value.params.year,l.value=h.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"}),_.value=await i.getKkboxToken()}),p.on("yearChange",d=>{D(d)}),p.on("updateSelectedYear",({year:d,awards:g})=>{D(d,g)});async function D(d=null,g=null){u.value=d||u.value,l.value=g||l.value;const s=await I(u.value,l.value);s&&(v.value=s,console.log(v.value))}async function M(d,g,s){switch(s){case"年度歌曲獎":n.value=Y(d)+" "+g,x.value="track";break;case"最佳作曲人獎":case"最佳作詞人獎":case"最佳單曲製作人獎":n.value=Y(d),x.value="track";break;case"最佳專輯製作人獎":n.value=Y(d),x.value="album";break;default:n.value=d+" "+g,x.value="album"}k.loading("Loading...",{position:k.POSITION.BOTTOM_RIGHT,autoClose:!0,theme:"dark",transition:"flip"});try{r.value=await f.getSongId(n.value,x.value,_.value.access_token),k.clearAll()}catch(R){console.error(R),k.error("Error occurred",{autoClose:5e3}),k.clearAll()}}function Y(d){return d.indexOf("《")!==-1?d.substring(0,d.indexOf("《")):d}return(d,g)=>(a(),o(b,null,[e("section",Q,[e("div",ee,[e("div",te,[r.value&&l.value!=="年度歌曲獎"&&l.value!=="最佳作曲人獎"&&l.value!=="最佳作詞人獎"&&l.value!=="最佳單曲製作人獎"?(a(),o("button",se," 專輯試聽側欄 ")):y("",!0)]),e("div",ae,[e("h2",oe,w(l.value),1)])]),r.value?(a(),o("div",re,[x.value==="track"?(a(),o("div",le,[e("iframe",{class:"h-[100px] w-72",src:`https://widget.kkbox.com/v1/?id=${r.value}&type=song&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,ne)])):y("",!0)])):y("",!0),(a(!0),o(b,null,$(v.value,s=>(a(),o("div",{class:"hover:bg-slate-700 flex justify-between rounded-md m-2",key:s.id},[e("div",ce,[e("img",{src:s.url,class:"row-span-2 p-2 rounded-xl w-20 h-20 aspect-square",alt:"awards img"},null,8,de),s.won?(a(),o("div",ie,[e("span",ue,w(s.work),1),e("span",null,w(s.nominee),1)])):(a(),o("div",he,[e("span",ve,w(s.work),1),e("span",null,w(s.nominee),1)]))]),_.value?(a(),o("div",_e,[s.awards==="年度歌曲獎"||s.awards==="最佳作曲人獎"||s.awards==="最佳作詞人獎"||s.awards==="最佳單曲製作人獎"?(a(),o("button",{key:0,class:"py-2 px-4",type:"button",onClick:R=>M(s.work,s.nominee,s.awards)},fe,8,we)):(a(),o("button",{key:1,"data-bs-toggle":"offcanvas","data-bs-target":"#demo",class:"py-2 px-4",type:"button",onClick:R=>M(s.work,s.nominee,s.awards)},me,8,xe))])):y("",!0)]))),128)),ye]),e("div",be,[ke,e("div",$e,[x.value==="album"?(a(),o("div",Ce,[e("iframe",{class:"fixed top-[64px] left-3 h-[calc(100%-64px)] border-0",src:`https://widget.kkbox.com/v1/?id=${r.value}&type=album&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,je)])):y("",!0)])])],64))}},Ye={class:"flex"},Re=["value"],Te={__name:"YearSelect",setup(S){const i=C(),f=t(),c=t("");j(async()=>{await i.isReady(),h()});async function h(){const l=await F();f.value=l.map(v=>v.year),c.value=i.currentRoute.value.params.year,p.emit("yearChange",c.value)}function u(l){i.push({path:`/Awards/${l}/${i.currentRoute.value.params.awards}`}),p.emit("yearChange",l)}return(l,v)=>(a(),o("div",Ye,[V(e("select",{onChange:v[0]||(v[0]=r=>u(c.value)),"onUpdate:modelValue":v[1]||(v[1]=r=>c.value=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(a(!0),o(b,null,$(f.value,r=>(a(),o("option",{value:r,key:r},w(r),9,Re))),128))],544),[[N,c.value]])]))}},Ae={class:"text-white"},Be={key:0,class:"z-20 absolute w-full h-full bg-[#202020]/90 bg-opacity-90"},De={class:"flex flex-col items-center justify-center h-full text-white"},Me=e("p",{class:"text-6xl text-custom-gold"},"(='X'=)",-1),Ve=e("p",{class:"text-2xl m-4"},"年份錯誤",-1),Ne={class:"text-lg"},Ke=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})],-1),Le=e("span",null,"返回首頁",-1),Oe={class:"flex flex-col lg:flex-row gap-4 justify-between p-4"},Ie={class:"flex justify-between items-center"},Fe={class:"flex justify-between items-center p-3 text-gray-700 border border-gray-200 rounded-lg bg-gray-50","aria-label":"Breadcrumb"},Pe={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},Ze={class:"inline-flex items-center"},Ge=e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{class:"w-3 h-3 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})]),P(" 首頁 ")],-1),Ue={class:"flex items-center"},We=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),qe={class:"ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},Ee={class:"flex items-center"},Xe=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),ze={class:"ms-1 text-sm font-medium text-gray-900 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},He={class:"flex flex-col lg:flex-row gap-1 px-4"},tt={__name:"AwardsDetailView",setup(S){const i=C(),f=t(),c=t(),h=t();return p.on("isNotFoundYear",()=>{f.value=!0}),p.on("updateSelectedYear",({year:u,awards:l})=>{c.value=u,h.value=l}),p.on("yearChange",u=>{c.value=u}),j(async()=>{await i.isReady(),c.value=i.currentRoute.value.params.year,h.value=i.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),(u,l)=>(a(),o("main",Ae,[f.value?(a(),o("div",Be,[e("div",De,[Me,Ve,e("p",Ne,[m(A(B),{to:"/",class:"p-3 flex items-center justify-center text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 font-medium rounded-lg text-sm"},{default:T(()=>[Ke,Le]),_:1})])])])):y("",!0),e("div",null,[e("div",Oe,[e("div",Ie,[e("nav",Fe,[e("ol",Pe,[e("li",Ze,[m(A(B),{to:"/",class:"flex items-center"},{default:T(()=>[Ge]),_:1})]),e("li",null,[e("div",Ue,[We,m(A(B),{to:`/Awards/${c.value}`,class:"flex items-center"},{default:T(()=>[e("a",qe,w(c.value)+" 年 ",1)]),_:1},8,["to"])])]),e("li",null,[e("div",Ee,[Xe,e("a",ze,w(h.value),1)])])])])]),m(Te)]),e("div",He,[m(J),m(Se)])])]))}};export{tt as default};
