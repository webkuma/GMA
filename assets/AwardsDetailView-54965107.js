import{u as j,r as t,o as S,e as K,a as o,c as r,b as e,w as $,v as N,F as k,d as C,t as w,m as O,n as I,p as F,j as b,f as P,g as m,h as A,i as B,k as V,R as D,l as Z}from"./index-ccc8c173.js";import{L as G}from"./Loading-8b225a3d.js";import{e as f}from"./emitter-7f99bbc0.js";import{i as y}from"./index-19c578af.js";const U={class:"flex lg:hidden mb-4"},W=["value"],q={class:"w-1/2 border-1 border-cg3 bg-cg2 rounded hidden lg:block"},E=e("h2",{class:"pt-4 text-2xl font-bold text-center text-black"}," 看其他獎項 ",-1),X={class:"place-items-center place-content-center grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3"},z=["onClick"],H=e("span",{class:"absolute inset-2 bg-black rounded-md opacity-10","aria-hidden":"true"},null,-1),J={class:"absolute font-bold"},Q=["src"],ee={__name:"Awards",setup(Y){const u=j(),x=t(),c=t(),v=t(),h=t("");S(async()=>{await u.isReady(),x.value=u.currentRoute.value.params.year,c.value=u.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),f.on("yearChange",l=>{h.value=l,s(l)});async function s(l){const _=await K(l);_?v.value=_:f.emit("isNotFoundYear",!0)}function i(l){f.emit("updateSelectedYear",{year:h.value,awards:l}),u.push({path:`/Awards/${h.value}/${l}`})}return(l,_)=>(o(),r(k,null,[e("section",U,[$(e("select",{onChange:_[0]||(_[0]=n=>i(n.target.value)),"onUpdate:modelValue":_[1]||(_[1]=n=>c.value=n),class:"bg-gray-50 border-1 border-cg3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(o(!0),r(k,null,C(v.value,n=>(o(),r("option",{value:n.awards,key:n.id},w(n.awards),9,W))),128))],544),[[N,c.value]])]),e("section",q,[E,e("div",X,[(o(!0),r(k,null,C(v.value,n=>(o(),r("div",{class:"relative w-32 h-32 flex items-center justify-center bg-cg4 rounded-md cursor-pointer m-4",key:n.id,onClick:p=>i(n.awards)},[H,e("span",J,w(n.awards),1),e("img",{src:n.url,class:"p-1 rounded-xl w-32 h-32 aspect-square",alt:"awards img"},null,8,Q)],8,z))),128))])])],64))}},te={class:"w-full lg:w-1/2 flex flex-col border-1 border-cg3 bg-cg2 rounded"},se={class:"flex flex-col"},ae={class:"text-center mt-1"},oe={key:0,class:"text-white font-black bg-gradient-to-r from-yellow-500 via-yellow-600 to-yellow-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-yellow-500 text-base p-3 text-center rounded-lg",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#demo"},re={class:"text-center"},le={class:"col-start-2 py-4 text-2xl font-bold text-black"},ne={key:0,class:"flex justify-center"},ce={key:0},de=["src"],ie={class:"flex"},ue=["src"],he={key:0,class:"flex flex-col justify-center text-red-700"},ve={class:"text-lg mb-1 font-extrabold"},_e={class:"font-extrabold"},we={key:1,class:"flex flex-col justify-center text-black"},fe={class:"text-lg mb-1 font-semibold"},xe={class:"font-semibold"},pe={key:0,class:"flex items-center justify-center"},ge=["onClick"],me=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8 text-black"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),be=[me],ke=["onClick"],ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),$e=[ye],Ce=e("div",null,[e("p",{class:"p-2 text-gray-400"}," # 試聽找錯可能是金曲獎名稱與對方建立的 KKBOX 帳號不匹配或搜尋結果重複 ... ")],-1),je={class:"offcanvas offcanvas-start text-bg-dark",id:"demo",style:{width:"350px"}},Se=e("div",{class:"offcanvas-header"},[e("h1",{class:"offcanvas-title"},"專輯試聽"),e("button",{type:"button",class:"btn-close btn-close-white border","data-bs-dismiss":"offcanvas"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor",className:"w-6 h-6"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})])])],-1),Ye={class:"offcanvas-body flex items-center justify-center"},Re={key:0},Te=["src"],Ae={__name:"AwardsDetail",setup(Y){const u=O(),x=I();t();const c=t(1);t(0);const v=j(),h=t(),s=t();t(),t(),t(),t("");const i=t(),l=t(),_=t(),n=t(),p=t();S(async()=>{c.value=1,await v.isReady(),h.value=v.currentRoute.value.params.year,s.value=v.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"}),_.value=await u.getKkboxToken()}),f.on("yearChange",d=>{M(d)}),f.on("updateSelectedYear",({year:d,awards:g})=>{M(d,g)});async function M(d=null,g=null){h.value=d||h.value,s.value=g||s.value;const a=await F(h.value,s.value);a&&(i.value=a,console.log(i.value))}async function L(d,g,a){switch(a){case"年度歌曲獎":n.value=R(d)+" "+g,p.value="track";break;case"最佳作曲人獎":case"最佳作詞人獎":case"最佳單曲製作人獎":n.value=R(d),p.value="track";break;case"最佳專輯製作人獎":n.value=R(d),p.value="album";break;default:n.value=d+" "+g,p.value="album"}y.loading("Loading...",{position:y.POSITION.BOTTOM_RIGHT,autoClose:!0,theme:"dark",transition:"flip"});try{l.value=await x.getSongId(n.value,p.value,_.value.access_token),y.clearAll()}catch(T){console.error(T),y.error("Error occurred",{autoClose:5e3}),y.clearAll()}}function R(d){return d.indexOf("《")!==-1?d.substring(0,d.indexOf("《")):d}return(d,g)=>(o(),r(k,null,[e("section",te,[e("div",se,[e("div",ae,[l.value&&s.value!=="年度歌曲獎"&&s.value!=="最佳作曲人獎"&&s.value!=="最佳作詞人獎"&&s.value!=="最佳單曲製作人獎"?(o(),r("button",oe," 專輯試聽側欄 ")):b("",!0)]),e("div",re,[e("h2",le,w(s.value),1)])]),l.value?(o(),r("div",ne,[p.value==="track"?(o(),r("div",ce,[e("iframe",{class:"h-[100px] w-72",src:`https://widget.kkbox.com/v1/?id=${l.value}&type=song&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,de)])):b("",!0)])):b("",!0),(o(!0),r(k,null,C(i.value,a=>(o(),r("div",{class:"hover:bg-slate-300 flex justify-between rounded-md m-2",key:a.id},[e("div",ie,[e("img",{src:a.url,class:"row-span-2 p-2 rounded-xl w-20 h-20 aspect-square",alt:"awards img"},null,8,ue),a.won?(o(),r("div",he,[e("span",ve,w(a.work),1),e("span",_e,w(a.nominee),1)])):(o(),r("div",we,[e("span",fe,w(a.work),1),e("span",xe,w(a.nominee),1)]))]),_.value?(o(),r("div",pe,[a.awards==="年度歌曲獎"||a.awards==="最佳作曲人獎"||a.awards==="最佳作詞人獎"||a.awards==="最佳單曲製作人獎"?(o(),r("button",{key:0,class:"py-2 px-4",type:"button",onClick:T=>L(a.work,a.nominee,a.awards)},be,8,ge)):(o(),r("button",{key:1,"data-bs-toggle":"offcanvas","data-bs-target":"#demo",class:"py-2 px-4 text-black",type:"button",onClick:T=>L(a.work,a.nominee,a.awards)},$e,8,ke))])):b("",!0)]))),128)),Ce]),e("div",je,[Se,e("div",Ye,[p.value==="album"?(o(),r("div",Re,[e("iframe",{class:"fixed top-[64px] left-3 h-[calc(100%-64px)] border-0",src:`https://widget.kkbox.com/v1/?id=${l.value}&type=album&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,Te)])):b("",!0)])])],64))}},Be={class:"flex"},De=["value"],Me={__name:"YearSelect",setup(Y){const u=j(),x=t(),c=t("");S(async()=>{await u.isReady(),v()});async function v(){const s=await P();x.value=s.map(i=>i.year),c.value=u.currentRoute.value.params.year,f.emit("yearChange",c.value)}function h(s){u.push({path:`/Awards/${s}/${u.currentRoute.value.params.awards}`}),f.emit("yearChange",s)}return(s,i)=>(o(),r("div",Be,[$(e("select",{onChange:i[0]||(i[0]=l=>h(c.value)),"onUpdate:modelValue":i[1]||(i[1]=l=>c.value=l),class:"bg-gray-50 border-1 border-cg3 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(o(!0),r(k,null,C(x.value,l=>(o(),r("option",{value:l,key:l},w(l),9,De))),128))],544),[[N,c.value]])]))}},Le={class:"text-white"},Ve={key:0,class:"z-20 absolute w-full h-full bg-[#202020]/90 bg-opacity-90"},Ne={class:"flex flex-col items-center justify-center h-full text-white"},Ke=e("p",{class:"text-6xl text-custom-gold"},"(='X'=)",-1),Oe=e("p",{class:"text-2xl m-4"},"年份錯誤",-1),Ie={class:"text-lg"},Fe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})],-1),Pe=e("span",null,"返回首頁",-1),Ze={class:"flex flex-col lg:flex-row gap-4 justify-between p-4"},Ge={class:"flex justify-between items-center"},Ue={class:"flex justify-between items-center p-3 text-gray-700 border-1 border-cg3 rounded-lg bg-gray-50","aria-label":"Breadcrumb"},We={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},qe={class:"inline-flex items-center"},Ee=e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{class:"w-3 h-3 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})]),Z(" 首頁 ")],-1),Xe={class:"flex items-center"},ze=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),He={class:"ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},Je={class:"flex items-center"},Qe=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),et={class:"ms-1 text-sm font-medium text-gray-900 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},tt={class:"flex flex-col lg:flex-row gap-3 px-4"},lt={__name:"AwardsDetailView",setup(Y){const u=j(),x=t(),c=t(),v=t(),h=t(!1);return f.on("isNotFoundYear",()=>{x.value=!0}),f.on("updateSelectedYear",({year:s,awards:i})=>{c.value=s,v.value=i}),f.on("yearChange",s=>{c.value=s,h.value=!0}),S(async()=>{await u.isReady(),c.value=u.currentRoute.value.params.year,v.value=u.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),(s,i)=>(o(),r("main",Le,[x.value?(o(),r("div",Ve,[e("div",Ne,[Ke,Oe,e("p",Ie,[m(B(D),{to:"/",class:"p-3 flex items-center justify-center text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 font-medium rounded-lg text-sm"},{default:A(()=>[Fe,Pe]),_:1})])])])):b("",!0),$(m(G,null,null,512),[[V,!h.value]]),$(e("div",null,[e("div",Ze,[e("div",Ge,[e("nav",Ue,[e("ol",We,[e("li",qe,[m(B(D),{to:"/",class:"flex items-center"},{default:A(()=>[Ee]),_:1})]),e("li",null,[e("div",Xe,[ze,m(B(D),{to:`/Awards/${c.value}`,class:"flex items-center"},{default:A(()=>[e("a",He,w(c.value)+" 年 ",1)]),_:1},8,["to"])])]),e("li",null,[e("div",Je,[Qe,e("a",et,w(v.value),1)])])])])]),m(Me)]),e("div",tt,[m(ee),m(Ae)])],512),[[V,h.value]])]))}};export{lt as default};
