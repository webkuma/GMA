import{u as C,r as t,o as j,a,c as o,b as e,w as V,v as N,F as b,d as $,t as p,j as K,k as L,h as y,e as m,f as T,g as A,R as B,i as O}from"./index-9f99a164.js";import{e as f}from"./emitter-7f99bbc0.js";import{a as I,b as F,f as P}from"./Sqlite-bc62f90a.js";import{i as k}from"./index-d9186a48.js";const Z={class:"flex lg:hidden mb-4"},G=["value"],U={class:"w-1/2 bg-gray-600 bg-opacity-20 rounded hidden lg:block"},W=e("h2",{class:"pt-4 text-2xl font-bold text-center text-yellow-200"}," 看其他獎項 ",-1),q={class:"place-items-center place-content-center grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3"},E=["onClick"],X=e("span",{class:"absolute inset-0 bg-black rounded-md opacity-50","aria-hidden":"true"},null,-1),z={class:"absolute font-bold"},H=["src"],J={__name:"Awards",setup(S){const i=C(),x=t(),c=t(),v=t(),d=t("");j(async()=>{await i.isReady(),x.value=i.currentRoute.value.params.year,c.value=i.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),f.on("yearChange",l=>{d.value=l,r(l)});async function r(l){const _=await I(l);_.length?v.value=_[0].values:f.emit("isNotFoundYear",!0)}function h(l){f.emit("updateSelectedYear",{year:d.value,awards:l}),i.push({path:`/Awards/${d.value}/${l}`})}return(l,_)=>(a(),o(b,null,[e("section",Z,[V(e("select",{onChange:_[0]||(_[0]=n=>h(n.target.value)),"onUpdate:modelValue":_[1]||(_[1]=n=>c.value=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(a(!0),o(b,null,$(v.value,n=>(a(),o("option",{value:n[0],key:n.id},p(n[0]),9,G))),128))],544),[[N,c.value]])]),e("section",U,[W,e("div",q,[(a(!0),o(b,null,$(v.value,n=>(a(),o("div",{class:"relative w-32 h-32 flex items-center justify-center bg-custom-gold rounded-md cursor-pointer m-4",key:n.id,onClick:w=>h(n[0])},[X,e("span",z,p(n[0]),1),e("img",{src:n[1],class:"p-1 rounded-xl w-32 h-32 aspect-square",alt:"awards img"},null,8,H)],8,E))),128))])])],64))}},Q={class:"w-full lg:w-1/2 flex flex-col bg-gray-600 bg-opacity-20 rounded"},ee={class:"flex flex-col"},te={class:"text-center mt-1"},se={key:0,class:"text-[#f4e0b2] font-black bg-gradient-to-r from-yellow-500 via-yellow-600 to-yellow-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-yellow-500 text-base p-3 text-center rounded-lg",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#demo"},ae={class:"text-center"},oe={class:"col-start-2 py-4 text-2xl font-bold text-yellow-200"},le={key:0,class:"flex justify-center"},re={key:0},ne=["src"],ce={class:"flex"},ue=["src"],ie={key:0,class:"flex flex-col justify-center text-yellow-200"},de={key:1,class:"flex flex-col justify-center"},ve={key:0,class:"flex items-center justify-center"},he=["onClick"],_e=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),pe=[_e],fe=["onClick"],xe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),we=[xe],ge=e("div",null,[e("p",{class:"p-2 text-gray-400"}," # 試聽找錯可能是金曲獎名稱與對方建立的 KKBOX 帳號不匹配或搜尋結果重複 ... ")],-1),me={class:"offcanvas offcanvas-start text-bg-dark",id:"demo",style:{width:"350px"}},ye=e("div",{class:"offcanvas-header"},[e("h1",{class:"offcanvas-title"},"專輯試聽"),e("button",{type:"button",class:"btn-close btn-close-white border","data-bs-dismiss":"offcanvas"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor",className:"w-6 h-6"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})])])],-1),be={class:"offcanvas-body flex items-center justify-center"},ke={key:0},$e=["src"],Ce={__name:"AwardsDetail",setup(S){const i=K(),x=L();t();const c=t(1);t(0);const v=C(),d=t(),r=t();t(),t(),t(),t("");const h=t(),l=t(),_=t(),n=t(),w=t();j(async()=>{c.value=1,await v.isReady(),d.value=v.currentRoute.value.params.year,r.value=v.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"}),_.value=await i.getKkboxToken()}),f.on("yearChange",u=>{D(u)}),f.on("updateSelectedYear",({year:u,awards:g})=>{D(u,g)});async function D(u=null,g=null){d.value=u||d.value,r.value=g||r.value;const s=await F(d.value,r.value);s.length&&(h.value=s[0].values)}async function M(u,g,s){switch(s){case"年度歌曲獎":n.value=Y(u)+" "+g,w.value="track";break;case"最佳作曲人獎":case"最佳作詞人獎":case"最佳單曲製作人獎":n.value=Y(u),w.value="track";break;case"最佳專輯製作人獎":n.value=Y(u),w.value="album";break;default:n.value=u+" "+g,w.value="album"}k.loading("Loading...",{position:k.POSITION.BOTTOM_RIGHT,autoClose:!0,theme:"dark",transition:"flip"});try{l.value=await x.getSongId(n.value,w.value,_.value.access_token),k.clearAll()}catch(R){console.error(R),k.error("Error occurred",{autoClose:5e3}),k.clearAll()}}function Y(u){return u.indexOf("《")!==-1?u.substring(0,u.indexOf("《")):u}return(u,g)=>(a(),o(b,null,[e("section",Q,[e("div",ee,[e("div",te,[l.value&&r.value!=="年度歌曲獎"&&r.value!=="最佳作曲人獎"&&r.value!=="最佳作詞人獎"&&r.value!=="最佳單曲製作人獎"?(a(),o("button",se," 專輯試聽側欄 ")):y("",!0)]),e("div",ae,[e("h2",oe,p(r.value),1)])]),l.value?(a(),o("div",le,[w.value==="track"?(a(),o("div",re,[e("iframe",{class:"h-[100px] w-72",src:`https://widget.kkbox.com/v1/?id=${l.value}&type=song&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,ne)])):y("",!0)])):y("",!0),(a(!0),o(b,null,$(h.value,s=>(a(),o("div",{class:"hover:bg-slate-700 flex justify-between rounded-md m-2",key:s[0]},[e("div",ce,[e("img",{src:s[6],class:"row-span-2 p-2 rounded-xl w-20 h-20 aspect-square",alt:"awards img"},null,8,ue),s[5]?(a(),o("div",ie,[e("span",null,p(s[3]),1),e("span",null,p(s[2]),1)])):(a(),o("div",de,[e("span",null,p(s[3]),1),e("span",null,p(s[2]),1)]))]),_.value?(a(),o("div",ve,[s[1]==="年度歌曲獎"||s[1]==="最佳作曲人獎"||s[1]==="最佳作詞人獎"||s[1]==="最佳單曲製作人獎"?(a(),o("button",{key:0,class:"py-2 px-4",type:"button",onClick:R=>M(s[3],s[2],s[1])},pe,8,he)):(a(),o("button",{key:1,"data-bs-toggle":"offcanvas","data-bs-target":"#demo",class:"py-2 px-4",type:"button",onClick:R=>M(s[3],s[2],s[1])},we,8,fe))])):y("",!0)]))),128)),ge]),e("div",me,[ye,e("div",be,[w.value==="album"?(a(),o("div",ke,[e("iframe",{class:"fixed top-[64px] left-3 h-[calc(100%-64px)] border-0",src:`https://widget.kkbox.com/v1/?id=${l.value}&type=album&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,$e)])):y("",!0)])])],64))}},je={class:"flex"},Se=["value"],Ye={__name:"YearSelect",setup(S){const i=C(),x=t(),c=t("");j(async()=>{await i.isReady(),v()});async function v(){const r=await P();x.value=r[0].values.map(h=>h[0]),c.value=i.currentRoute.value.params.year,f.emit("yearChange",c.value)}function d(r){i.push({path:`/Awards/${r}/${i.currentRoute.value.params.awards}`}),f.emit("yearChange",r)}return(r,h)=>(a(),o("div",je,[V(e("select",{onChange:h[0]||(h[0]=l=>d(c.value)),"onUpdate:modelValue":h[1]||(h[1]=l=>c.value=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(a(!0),o(b,null,$(x.value,l=>(a(),o("option",{value:l,key:l},p(l),9,Se))),128))],544),[[N,c.value]])]))}},Re={class:"text-white"},Te={key:0,class:"z-20 absolute w-full h-full bg-[#202020]/90 bg-opacity-90"},Ae={class:"flex flex-col items-center justify-center h-full text-white"},Be=e("p",{class:"text-6xl text-custom-gold"},"(='X'=)",-1),De=e("p",{class:"text-2xl m-4"},"年份錯誤",-1),Me={class:"text-lg"},Ve=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})],-1),Ne=e("span",null,"返回首頁",-1),Ke={class:"flex justify-between p-4"},Le={class:"flex justify-between items-center"},Oe={class:"flex justify-between items-center p-3 text-gray-700 border border-gray-200 rounded-lg bg-gray-50","aria-label":"Breadcrumb"},Ie={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},Fe={class:"inline-flex items-center"},Pe=e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{class:"w-3 h-3 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})]),O(" 首頁 ")],-1),Ze={class:"flex items-center"},Ge=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),Ue={class:"ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},We={class:"flex items-center"},qe=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),Ee={class:"ms-1 text-sm font-medium text-gray-900 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},Xe={class:"flex flex-col lg:flex-row gap-1 px-4"},et={__name:"AwardsDetailView",setup(S){const i=C(),x=t(),c=t(),v=t();return f.on("isNotFoundYear",()=>{x.value=!0}),f.on("updateSelectedYear",({year:d,awards:r})=>{c.value=d,v.value=r}),f.on("yearChange",d=>{c.value=d}),j(async()=>{await i.isReady(),c.value=i.currentRoute.value.params.year,v.value=i.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),(d,r)=>(a(),o("main",Re,[x.value?(a(),o("div",Te,[e("div",Ae,[Be,De,e("p",Me,[m(A(B),{to:"/",class:"p-3 flex items-center justify-center text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 font-medium rounded-lg text-sm"},{default:T(()=>[Ve,Ne]),_:1})])])])):y("",!0),e("div",null,[e("div",Ke,[e("div",Le,[e("nav",Oe,[e("ol",Ie,[e("li",Fe,[m(A(B),{to:"/",class:"flex items-center"},{default:T(()=>[Pe]),_:1})]),e("li",null,[e("div",Ze,[Ge,m(A(B),{to:`/Awards/${c.value}`,class:"flex items-center"},{default:T(()=>[e("a",Ue,p(c.value)+" 年 ",1)]),_:1},8,["to"])])]),e("li",null,[e("div",We,[qe,e("a",Ee,p(v.value),1)])])])])]),m(Ye)]),e("div",Xe,[m(J),m(Ce)])])]))}};export{et as default};
