import{u as j,r as t,o as S,e as K,a as o,c as r,b as e,w as $,v as N,F as b,d as C,t as w,m as O,n as I,p as F,j as y,f as P,g as m,h as A,i as B,k as V,R as D,l as Z}from"./index-112cfcc6.js";import{L as G}from"./Loading-c14764b7.js";import{e as p}from"./emitter-7f99bbc0.js";import{i as k}from"./index-02fe7b37.js";const U={class:"flex lg:hidden mb-4"},W=["value"],q={class:"w-1/2 bg-gray-600 bg-opacity-20 rounded hidden lg:block"},E=e("h2",{class:"pt-4 text-2xl font-bold text-center text-yellow-200"}," 看其他獎項 ",-1),X={class:"place-items-center place-content-center grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3"},z=["onClick"],H=e("span",{class:"absolute inset-0 bg-black rounded-md opacity-50","aria-hidden":"true"},null,-1),J={class:"absolute font-bold"},Q=["src"],ee={__name:"Awards",setup(Y){const u=j(),f=t(),c=t(),h=t(),v=t("");S(async()=>{await u.isReady(),f.value=u.currentRoute.value.params.year,c.value=u.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),p.on("yearChange",l=>{v.value=l,s(l)});async function s(l){const _=await K(l);_?h.value=_:p.emit("isNotFoundYear",!0)}function d(l){p.emit("updateSelectedYear",{year:v.value,awards:l}),u.push({path:`/Awards/${v.value}/${l}`})}return(l,_)=>(o(),r(b,null,[e("section",U,[$(e("select",{onChange:_[0]||(_[0]=n=>d(n.target.value)),"onUpdate:modelValue":_[1]||(_[1]=n=>c.value=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(o(!0),r(b,null,C(h.value,n=>(o(),r("option",{value:n.awards,key:n.id},w(n.awards),9,W))),128))],544),[[N,c.value]])]),e("section",q,[E,e("div",X,[(o(!0),r(b,null,C(h.value,n=>(o(),r("div",{class:"relative w-32 h-32 flex items-center justify-center bg-custom-gold rounded-md cursor-pointer m-4",key:n.id,onClick:x=>d(n.awards)},[H,e("span",J,w(n.awards),1),e("img",{src:n.url,class:"p-1 rounded-xl w-32 h-32 aspect-square",alt:"awards img"},null,8,Q)],8,z))),128))])])],64))}},te={class:"w-full lg:w-1/2 flex flex-col bg-gray-600 bg-opacity-20 rounded"},se={class:"flex flex-col"},ae={class:"text-center mt-1"},oe={key:0,class:"text-[#f4e0b2] font-black bg-gradient-to-r from-yellow-500 via-yellow-600 to-yellow-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-yellow-500 text-base p-3 text-center rounded-lg",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#demo"},re={class:"text-center"},le={class:"col-start-2 py-4 text-2xl font-bold text-yellow-200"},ne={key:0,class:"flex justify-center"},ce={key:0},ie=["src"],de={class:"flex"},ue=["src"],ve={key:0,class:"flex flex-col justify-center text-yellow-200"},he={class:"text-lg mb-1"},_e={key:1,class:"flex flex-col justify-center"},we={class:"text-lg mb-1"},pe={key:0,class:"flex items-center justify-center"},fe=["onClick"],xe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),ge=[xe],me=["onClick"],ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.0",stroke:"currentColor",class:"w-8 h-8"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})],-1),be=[ye],ke=e("div",null,[e("p",{class:"p-2 text-gray-400"}," # 試聽找錯可能是金曲獎名稱與對方建立的 KKBOX 帳號不匹配或搜尋結果重複 ... ")],-1),$e={class:"offcanvas offcanvas-start text-bg-dark",id:"demo",style:{width:"350px"}},Ce=e("div",{class:"offcanvas-header"},[e("h1",{class:"offcanvas-title"},"專輯試聽"),e("button",{type:"button",class:"btn-close btn-close-white border","data-bs-dismiss":"offcanvas"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor",className:"w-6 h-6"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})])])],-1),je={class:"offcanvas-body flex items-center justify-center"},Se={key:0},Ye=["src"],Re={__name:"AwardsDetail",setup(Y){const u=O(),f=I();t();const c=t(1);t(0);const h=j(),v=t(),s=t();t(),t(),t(),t("");const d=t(),l=t(),_=t(),n=t(),x=t();S(async()=>{c.value=1,await h.isReady(),v.value=h.currentRoute.value.params.year,s.value=h.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"}),_.value=await u.getKkboxToken()}),p.on("yearChange",i=>{M(i)}),p.on("updateSelectedYear",({year:i,awards:g})=>{M(i,g)});async function M(i=null,g=null){v.value=i||v.value,s.value=g||s.value;const a=await F(v.value,s.value);a&&(d.value=a,console.log(d.value))}async function L(i,g,a){switch(a){case"年度歌曲獎":n.value=R(i)+" "+g,x.value="track";break;case"最佳作曲人獎":case"最佳作詞人獎":case"最佳單曲製作人獎":n.value=R(i),x.value="track";break;case"最佳專輯製作人獎":n.value=R(i),x.value="album";break;default:n.value=i+" "+g,x.value="album"}k.loading("Loading...",{position:k.POSITION.BOTTOM_RIGHT,autoClose:!0,theme:"dark",transition:"flip"});try{l.value=await f.getSongId(n.value,x.value,_.value.access_token),k.clearAll()}catch(T){console.error(T),k.error("Error occurred",{autoClose:5e3}),k.clearAll()}}function R(i){return i.indexOf("《")!==-1?i.substring(0,i.indexOf("《")):i}return(i,g)=>(o(),r(b,null,[e("section",te,[e("div",se,[e("div",ae,[l.value&&s.value!=="年度歌曲獎"&&s.value!=="最佳作曲人獎"&&s.value!=="最佳作詞人獎"&&s.value!=="最佳單曲製作人獎"?(o(),r("button",oe," 專輯試聽側欄 ")):y("",!0)]),e("div",re,[e("h2",le,w(s.value),1)])]),l.value?(o(),r("div",ne,[x.value==="track"?(o(),r("div",ce,[e("iframe",{class:"h-[100px] w-72",src:`https://widget.kkbox.com/v1/?id=${l.value}&type=song&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,ie)])):y("",!0)])):y("",!0),(o(!0),r(b,null,C(d.value,a=>(o(),r("div",{class:"hover:bg-slate-700 flex justify-between rounded-md m-2",key:a.id},[e("div",de,[e("img",{src:a.url,class:"row-span-2 p-2 rounded-xl w-20 h-20 aspect-square",alt:"awards img"},null,8,ue),a.won?(o(),r("div",ve,[e("span",he,w(a.work),1),e("span",null,w(a.nominee),1)])):(o(),r("div",_e,[e("span",we,w(a.work),1),e("span",null,w(a.nominee),1)]))]),_.value?(o(),r("div",pe,[a.awards==="年度歌曲獎"||a.awards==="最佳作曲人獎"||a.awards==="最佳作詞人獎"||a.awards==="最佳單曲製作人獎"?(o(),r("button",{key:0,class:"py-2 px-4",type:"button",onClick:T=>L(a.work,a.nominee,a.awards)},ge,8,fe)):(o(),r("button",{key:1,"data-bs-toggle":"offcanvas","data-bs-target":"#demo",class:"py-2 px-4",type:"button",onClick:T=>L(a.work,a.nominee,a.awards)},be,8,me))])):y("",!0)]))),128)),ke]),e("div",$e,[Ce,e("div",je,[x.value==="album"?(o(),r("div",Se,[e("iframe",{class:"fixed top-[64px] left-3 h-[calc(100%-64px)] border-0",src:`https://widget.kkbox.com/v1/?id=${l.value}&type=album&terr=TW&lang=TC&autoplay=true`,allow:"autoplay"},null,8,Ye)])):y("",!0)])])],64))}},Te={class:"flex"},Ae=["value"],Be={__name:"YearSelect",setup(Y){const u=j(),f=t(),c=t("");S(async()=>{await u.isReady(),h()});async function h(){const s=await P();f.value=s.map(d=>d.year),c.value=u.currentRoute.value.params.year,p.emit("yearChange",c.value)}function v(s){u.push({path:`/Awards/${s}/${u.currentRoute.value.params.awards}`}),p.emit("yearChange",s)}return(s,d)=>(o(),r("div",Te,[$(e("select",{onChange:d[0]||(d[0]=l=>v(c.value)),"onUpdate:modelValue":d[1]||(d[1]=l=>c.value=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full py-2.5 px-2"},[(o(!0),r(b,null,C(f.value,l=>(o(),r("option",{value:l,key:l},w(l),9,Ae))),128))],544),[[N,c.value]])]))}},De={class:"text-white"},Me={key:0,class:"z-20 absolute w-full h-full bg-[#202020]/90 bg-opacity-90"},Le={class:"flex flex-col items-center justify-center h-full text-white"},Ve=e("p",{class:"text-6xl text-custom-gold"},"(='X'=)",-1),Ne=e("p",{class:"text-2xl m-4"},"年份錯誤",-1),Ke={class:"text-lg"},Oe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})],-1),Ie=e("span",null,"返回首頁",-1),Fe={class:"flex flex-col lg:flex-row gap-4 justify-between p-4"},Pe={class:"flex justify-between items-center"},Ze={class:"flex justify-between items-center p-3 text-gray-700 border border-gray-200 rounded-lg bg-gray-50","aria-label":"Breadcrumb"},Ge={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},Ue={class:"inline-flex items-center"},We=e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{class:"w-3 h-3 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})]),Z(" 首頁 ")],-1),qe={class:"flex items-center"},Ee=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),Xe={class:"ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},ze={class:"flex items-center"},He=e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1),Je={class:"ms-1 text-sm font-medium text-gray-900 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},Qe={class:"flex flex-col lg:flex-row gap-1 px-4"},ot={__name:"AwardsDetailView",setup(Y){const u=j(),f=t(),c=t(),h=t(),v=t(!1);return p.on("isNotFoundYear",()=>{f.value=!0}),p.on("updateSelectedYear",({year:s,awards:d})=>{c.value=s,h.value=d}),p.on("yearChange",s=>{c.value=s,v.value=!0}),S(async()=>{await u.isReady(),c.value=u.currentRoute.value.params.year,h.value=u.currentRoute.value.params.awards,window.scrollTo({top:0,behavior:"smooth"})}),(s,d)=>(o(),r("main",De,[f.value?(o(),r("div",Me,[e("div",Le,[Ve,Ne,e("p",Ke,[m(B(D),{to:"/",class:"p-3 flex items-center justify-center text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 font-medium rounded-lg text-sm"},{default:A(()=>[Oe,Ie]),_:1})])])])):y("",!0),$(m(G,null,null,512),[[V,!v.value]]),$(e("div",null,[e("div",Fe,[e("div",Pe,[e("nav",Ze,[e("ol",Ge,[e("li",Ue,[m(B(D),{to:"/",class:"flex items-center"},{default:A(()=>[We]),_:1})]),e("li",null,[e("div",qe,[Ee,m(B(D),{to:`/Awards/${c.value}`,class:"flex items-center"},{default:A(()=>[e("a",Xe,w(c.value)+" 年 ",1)]),_:1},8,["to"])])]),e("li",null,[e("div",ze,[He,e("a",Je,w(h.value),1)])])])])]),m(Be)]),e("div",Qe,[m(ee),m(Re)])],512),[[V,v.value]])]))}};export{ot as default};
