import{m as w,r as h,u as y,o as b,n as k,a as o,c as a,b as e,e as m,f as S,g as C,t as i,F as j,d as B,h as L,R as I,q as D,i as x,w as R}from"./index-43f5ac34.js";import{L as V}from"./Loading-2e3cfb6d.js";import{i as _}from"./index-84b9e2e1.js";import{c as F}from"./Sqlite-af174c0b.js";const N={class:"text-white"},z={key:0,class:"absolute w-full h-full bg-[#202020] bg-opacity-90"},O={class:"flex items-center justify-center h-full"},T={key:1},E={class:"m-4 flex justify-between items-center"},q={class:"flex justify-between items-center p-3 text-gray-700 border border-gray-200 rounded-lg bg-gray-50","aria-label":"Breadcrumb"},M={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},P={class:"inline-flex items-center"},Z=e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{class:"w-3 h-3 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})]),x(" 首頁 ")],-1),$=e("li",null,[e("div",{class:"flex items-center"},[e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})]),e("a",{class:"ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"}," 收藏 ")])],-1),G={class:"m-4"},H={class:"border-b-4 border-custom-gold"},K=e("span",{class:"text-2xl"},"已收藏的作品",-1),W={class:"mx-6 mb-6 grid grid-cols-1 lg:grid-cols-2 gap-4"},X={class:"flex items-center justify-end mr-4"},Y=["onClick"],A=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),J={class:"mr-4 w-20 h-20 sm:w-32 sm:h-32 rounded-lg aspect-square",alt:""},Q={class:"flex flex-col justify-evenly pl-2"},U={class:"text-base sm:text-xl font-semibold text-gray-700"},ee={class:"text-base sm:text-xl font-semibold text-gray-700"},te={class:"text-base font-semibold text-gray-500"},se={key:0,class:"p-4 flex flex-col items-center justify-center"},oe=e("p",{class:"text-6xl text-custom-gold"},"(='X'=)",-1),ae=e("p",{class:"text-2xl text-center pt-4"},"目前還沒有收藏作品",-1),re=[oe,ae],he={__name:"FavoriteView",setup(le){const f=w(),c=h(1),v=y(),r=h();b(async()=>{c.value=1,await v.isReady(),u()});async function u(){let l=Object.keys(localStorage).filter(t=>t.startsWith("favoriteStorage-")).map(t=>parseInt(t.replace("favoriteStorage-",""),10));const n=await F(l);n[0]?r.value=n[0].values.map(t=>({id:t[0],awards:t[1],nominee:t[2],work:t[3],year:t[4],won:t[5],url:t[6]})):r.value=null,c.value=0}function g(l){r.value.forEach(n=>{if(n.id===l){_.success("已從收藏移除",{theme:"dark",autoClose:1e3,transition:"zoom",position:_.POSITION.TOP_RIGHT}),localStorage.removeItem(`favoriteStorage-${l}`),u(),f.updateYearsDataStorage(l,!1),d();return}})}function d(){return r.value?r.value.length:0}return(l,n)=>{const t=k("lazy");return o(),a("main",N,[c.value===1?(o(),a("div",z,[e("div",O,[m(V)])])):(o(),a("div",T,[e("div",E,[e("nav",q,[e("ol",M,[e("li",P,[m(C(I),{to:"/",class:"inline-block"},{default:S(()=>[Z]),_:1})]),$])])]),e("div",G,[e("span",H,[K,e("span",null," ("+i(d())+")",1)])]),e("div",W,[(o(!0),a(j,null,B(r.value,(s,p)=>(o(),a("div",{key:p,class:D(["flex shadow-custom-inner shadow-yellow-500 mt-4 p-4 border rounded-lg",{"bg-[#F5E8C7]":s.won,"bg-gray-200 ":!s.won}])},[e("div",X,[(o(),a("svg",{onClick:ne=>g(s.id),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor",class:"w-6 h-6 cursor-pointer fill-red-500"},[A,x(" /> ")],8,Y))]),R(e("img",J,null,512),[[t,s.url]]),e("div",Q,[e("div",null,[e("span",U,i(s.nominee),1),e("span",ee,"／ "+i(s.work),1)]),e("p",te,i(s.awards),1)])],2))),128))]),d()?L("",!0):(o(),a("div",se,re))]))])}}};export{he as default};
