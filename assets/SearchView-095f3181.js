import{u as I,l as V,m as $,r as m,o as A,n as R,a as t,c as o,h as d,g as n,b as e,e as T,f as j,w as y,p as F,q as v,i as L,F as x,d as _,t as c,R as M}from"./index-6e7b799a.js";import{L as O}from"./Loading-5c33555f.js";import{i as p}from"./index-2f5b965b.js";const U={class:"text-white"},z=e("button",{type:"button","data-te-ripple-init":"","data-te-ripple-color":"light",class:"!fixed bottom-5 right-5 rounded-full bg-red-600 p-3 text-xs font-medium uppercase leading-tight text-white shadow-md transition duration-150 ease-in-out hover:bg-red-700 hover:shadow-lg focus:bg-red-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-red-800 active:shadow-lg",id:"btn-back-to-top",style:{}},[e("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas",class:"h-4 w-4",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},[e("path",{fill:"currentColor",d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"})])],-1),H=[z],G={key:1,class:"absolute w-full h-full bg-[#202020] bg-opacity-90"},Y={class:"flex items-center justify-center h-full"},P={key:2},q={class:"p-4 flex flex-col sm:flex-row sm:justify-between sm:items-center"},Z={class:"flex justify-between items-center p-3 text-gray-700 border border-gray-200 rounded-lg bg-gray-50 max-w-[150px]","aria-label":"Breadcrumb"},X={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},J={class:"inline-flex items-center"},K=e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{class:"w-3 h-3 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"})]),L(" 首頁 ")],-1),Q=e("li",null,[e("div",{class:"flex items-center"},[e("svg",{class:"rtl:rotate-180 block w-3 h-3 mx-1 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})]),e("a",{class:"ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"}," 搜尋 ")])],-1),ee={class:"flex sm:justify-end gap-1 mt-2"},te={key:0,class:"flex"},oe={for:"default-checkbox",class:"flex items-center p-3 text-[#f4e0b2] bg-gradient-to-r from-yellow-500 via-yellow-600 to-yellow-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-yellow-500 rounded-lg text-sm text-center"},se=e("span",{class:"font-black"},"列表模式",-1),le=e("span",{class:"mr-1 font-black"},"年份排序",-1),re=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"},null,-1),ne={key:0},ae=e("div",{class:"mx-4"},[e("span",{class:"border-b-4 border-custom-gold text-2xl"},"2010～2024 年獲獎次數排行 ")],-1),ie={class:"px-4 text-xl text-yellow-50 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-1"},ce=["onClick"],de={class:"w-24 h-24 rounded-lg aspect-square",alt:"album"},ue={class:"flex flex-col justify-evenly pl-4"},he={class:"text-lg font-semibold text-gray-900"},xe={class:"text-lg font-semibold text-gray-900"},_e={key:1,class:"flex flex-col justify-center items-center"},ge=e("p",{class:"text-6xl text-custom-gold"},"(='X'=)",-1),fe={class:"text-2xl m-4"},we=e("p",{class:"text-xl"},"請嘗試用不同關鍵字再搜尋一次。",-1),me={key:2},ve={key:0},pe={class:"mx-4 mb-2"},ye={class:"pr-1 border-b-4 border-custom-gold text-2xl"},be={class:"px-4 py-2 overflow-auto"},ke={class:"table table-hover overflow-x-scroll whitespace-nowrap"},Se=e("thead",null,[e("tr",{class:"[&>*]:font-semibold"},[e("th",{class:"rounded-ss-md w-10"},"收藏"),e("th",null,"獲獎"),e("th",null,"歌手"),e("th",null,"作品"),e("th",{class:"rounded-se-md"},"獎項")])],-1),Ce=["onClick"],Te=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"},null,-1),Le=[Te],Ee={key:0,class:"text-base font-semibold"},Ne={key:1,class:"text-base"},De=["onClick"],We={class:"text-base font-normal"},Be=["onClick"],Ie={key:1},Ve={class:"mx-4"},$e={class:"pr-1 border-b-4 border-custom-gold text-2xl"},Ae={class:"p-4 grid grid-cols-1 lg:grid-cols-2 gap-4"},Re={class:"flex items-center justify-end mr-4"},je=["onClick"],Fe=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"},null,-1),Me=[Fe],Oe={class:"mr-4 w-20 h-20 sm:w-32 sm:h-32 rounded-lg aspect-square",alt:"album pic"},Ue={class:"flex flex-col justify-evenly pl-2"},ze=["onClick"],He={class:"text-base sm:text-xl font-semibold text-gray-700"},Ge=["onClick"],Ye=`
SELECT
    nominee AS "nominee",
    MIN(url) AS "url",
    COUNT(CASE WHEN won = 1 THEN 1 END) AS "won",
    COUNT(*) AS "nomineeTime",
    id
FROM
    shortlist
GROUP BY
    nominee
HAVING
    COUNT(CASE WHEN won = 1 THEN 1 END) > 0
ORDER BY
    won DESC;
`,Je={__name:"SearchView",setup(Pe){const E=I(),b=V(),s=$(),g=m(),f=m(!1),k=m(),u=m(0);A(async()=>{await E.isReady(),g.value||(await b.getWonListData(Ye),g.value=b.mountedWonList)});function N(){f.value=!f.value,f.value?s.yearsData.sort((i,a)=>i.year-a.year):s.yearsData.sort((i,a)=>a.year-i.year)}function D(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",W);function W(){const i=window.scrollY;k.value=i>200?1:0}function S(i){!!localStorage.getItem(`favoriteStorage-${i}`)?(p.success("已從收藏移除",{theme:"dark",autoClose:1500,transition:"zoom",position:p.POSITION.TOP_RIGHT}),localStorage.removeItem(`favoriteStorage-${i}`),s.updateYearsDataStorage(i,!1)):(p.success("已添加至收藏",{theme:"dark",autoClose:1500,transition:"zoom",position:p.POSITION.TOP_RIGHT}),localStorage.setItem(`favoriteStorage-${i}`,"id"),s.updateYearsDataStorage(i,!0))}function B(){u.value=!u.value}return(i,a)=>{const C=R("lazy");return t(),o("main",U,[k.value?(t(),o("div",{key:0,class:"fixed right-5 bottom-5 z-50",onClick:D},H)):d("",!0),!g.value||n(s).state.Searching?(t(),o("div",G,[e("div",Y,[T(O)])])):(t(),o("div",P,[e("div",q,[e("nav",Z,[e("ol",X,[e("li",J,[T(n(M),{to:"/",class:"flex items-center"},{default:j(()=>[K]),_:1})]),Q])]),e("div",ee,[n(s).state.UnsearchedState?d("",!0):(t(),o("div",te,[e("label",oe,[y(e("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>u.value=r),id:"default-checkbox",type:"checkbox",class:"w-4 h-4 mr-1 text-blue-600 bg-gray-100 border-gray-300 rounded",onClick:a[1]||(a[1]=r=>B())},null,512),[[F,u.value]]),se])])),!n(s).state.UnsearchedState&&!n(s).state.Searching?(t(),o("button",{key:1,onClick:a[2]||(a[2]=r=>n(s).backWonList()),type:"button",class:"p-3 text-[#f4e0b2] font-black bg-gradient-to-r from-yellow-500 via-yellow-600 to-yellow-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-yellow-500 dark:focus:ring-red-400 rounded-lg text-sm text-center"}," 獲獎列表 ")):d("",!0),n(s).state.SearchedFound?(t(),o("button",{key:2,onClick:a[3]||(a[3]=r=>N()),type:"button",class:"flex items-center justify-center p-3 text-[#f4e0b2] bg-gradient-to-r from-yellow-500 via-yellow-600 to-yellow-600 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-yellow-500 dark:focus:ring-red-400 rounded-lg text-sm text-center"},[le,(t(),o("svg",{id:"filterArrow",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:v(["w-4 h-4 transition-transform duration-500",[f.value?"rotate-0 ":"rotate-180"]])},[L(" > "),re],2))])):d("",!0)])]),n(s).state.UnsearchedState?(t(),o("div",ne,[ae,e("div",ie,[(t(!0),o(x,null,_(g.value,(r,l)=>(t(),o("div",{key:l,class:"flex shadow-custom-inner shadow-yellow-500 sh mx-2 mt-5 p-4 rounded-lg bg-[#F5E8C7] hover:cursor-pointer",onClick:w=>n(s).setSearchWord(r.nominee)},[y(e("img",de,null,512),[[C,r.url]]),e("div",ue,[e("p",he,c(r.nominee),1),e("p",xe,"獲獎: "+c(r.won)+" / 提名: "+c(r.nomineeTime),1)])],8,ce))),128))])])):d("",!0),n(s).state.SearchedNotFound?(t(),o("div",_e,[ge,e("p",fe,"找不到「"+c(n(s).searchWord)+"」",1),we])):d("",!0),n(s).state.SearchedFound?(t(),o("div",me,[u.value?(t(),o("div",ve,[(t(!0),o(x,null,_(n(s).yearsData,r=>(t(),o("div",{key:r.year,class:"text-base text-yellow-50"},[e("div",pe,[e("span",ye,c(r.year),1)]),e("div",be,[e("table",ke,[Se,e("tbody",null,[(t(!0),o(x,null,_(r.data,(l,w)=>(t(),o("tr",{key:w},[e("td",null,[(t(),o("svg",{onClick:h=>S(l.id),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor",class:v(["w-6 h-6 cursor-pointer stroke-red-500",[l.isStoraged?"fill-red-500 ":" fill-white"]])},Le,10,Ce))]),e("td",null,[l.won?(t(),o("span",Ee,"得獎")):(t(),o("span",Ne,"入圍"))]),e("td",{class:"text-base font-normal cursor-pointer",onClick:h=>n(s).setSearchWord(l.nominee)},c(l.nominee),9,De),e("td",We,c(l.work),1),e("td",{colspan:"4",class:"text-base font-normal cursor-pointer",onClick:h=>n(s).setSearchWord(l.awards)},c(l.awards),9,Be)]))),128))])])])]))),128))])):(t(),o("div",Ie,[(t(!0),o(x,null,_(n(s).yearsData,r=>(t(),o("div",{key:r.year,class:"text-xl text-yellow-50"},[e("div",Ve,[e("span",$e,c(r.year),1)]),e("div",Ae,[(t(!0),o(x,null,_(r.data,(l,w)=>(t(),o("div",{key:w,class:v(["relative flex shadow-custom-inner shadow-yellow-500 mx-2 mt-4 p-4 border rounded-lg",{"bg-[#F5E8C7]":l.won,"bg-gray-200 ":!l.won}])},[e("div",Re,[(t(),o("svg",{onClick:h=>S(l.id),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1",stroke:"currentColor",class:v(["w-6 h-6 cursor-pointer stroke-red-500",[l.isStoraged?"fill-red-500 ":" fill-gray-200"]])},Me,10,je))]),y(e("img",Oe,null,512),[[C,l.url]]),e("div",Ue,[e("div",null,[e("span",{class:"text-base sm:text-xl font-semibold text-gray-700 cursor-pointer",onClick:h=>n(s).setSearchWord(l.nominee)},c(l.nominee),9,ze),e("span",He,"／ "+c(l.work),1)]),e("p",{onClick:h=>n(s).setSearchWord(l.awards),class:"text-base font-semibold text-gray-500 cursor-pointer"},c(l.awards),9,Ge)])],2))),128))])]))),128))]))])):d("",!0)]))])}}};export{Je as default};
